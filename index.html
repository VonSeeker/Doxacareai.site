<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EvaCare AI - Healthcare Assistant for Sierra Leone</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f0fdf4;
    }
    
    .typing-indicator::after {
      content: '...';
      animation: typing 1.5s infinite;
    }
    
    @keyframes typing {
      0% { content: '.'; }
      33% { content: '..'; }
      66% { content: '...'; }
    }
    
    .translate-btn {
      transition: all 0.3s ease;
    }
    
    .translate-btn:hover {
      transform: scale(1.05);
    }
    
    .emergency-shake {
      animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
    }
    
    @keyframes shake {
      10%, 90% { transform: translate3d(-1px, 0, 0); }
      20%, 80% { transform: translate3d(2px, 0, 0); }
      30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
      40%, 60% { transform: translate3d(4px, 0, 0); }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-gradient-to-r from-green-600 to-yellow-400 shadow-md">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <i class="fas fa-heartbeat text-white text-2xl"></i>
        <h1 class="text-white font-bold text-xl md:text-2xl">EvaCare AI</h1>
      </div>
      <div class="flex items-center space-x-4">
        <button id="languageToggle" class="bg-white text-green-800 px-3 py-1 rounded-full text-sm font-medium flex items-center translate-btn">
          <span id="currentLanguage">Krio</span>
          <i class="fas fa-exchange-alt ml-1"></i>
        </button>
        <button id="emergencyBtn" class="bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center hover:bg-red-700 emergency-shake">
          <i class="fas fa-exclamation-triangle mr-1"></i>
          Emergency
        </button>
      </div>
    </div>
  </header>

  <!-- Nav Tabs -->
  <div class="bg-white shadow-sm">
    <div class="container mx-auto px-4">
      <div class="flex overflow-x-auto">
        <button class="tab-btn active px-4 py-3 text-green-700 font-medium border-b-2 border-green-700 whitespace-nowrap" data-tab="home">
          <i class="fas fa-home mr-2"></i>Home
        </button>
        <button class="tab-btn px-4 py-3 text-gray-600 font-medium whitespace-nowrap" data-tab="symptoms">
          <i class="fas fa-notes-medical mr-2"></i>Health Topics
        </button>
        <button class="tab-btn px-4 py-3 text-gray-600 font-medium whitespace-nowrap" data-tab="advice">
          <i class="fas fa-lightbulb mr-2"></i>Health Advice
        </button>
        <button class="tab-btn px-4 py-3 text-gray-600 font-medium whitespace-nowrap" data-tab="clinics">
          <i class="fas fa-hospital mr-2"></i>Find Clinics
        </button>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main class="flex-grow container mx-auto px-4 py-6">
    <!-- Home Tab (default visible) -->
    <div id="home-tab" class="tab-content active">
      <div class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
        <div class="bg-green-100 p-4 border-b border-green-200">
          <h2 class="text-green-800 font-bold text-lg">Welcome to DoxaCare AI</h2>
          <p id="welcomeText" class="text-gray-700 text-sm mt-1">Your trusted healthcare assistant for Sierra Leone. Ask about symptoms, get health advice, or find nearby clinics.</p>
          <p id="welcomeTextKrio" class="text-gray-700 text-sm mt-1 hidden">DoxaCare AI wey dey for you pan Salone health. Ask about sick wey you get, take health advice, or find clinic close to you.</p>
        </div>
        <div class="p-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
              <h3 class="font-bold text-yellow-800 mb-2 flex items-center">
                <i class="fas fa-bell text-yellow-600 mr-2"></i>
                <span id="healthAlertsTitle">Health Alerts</span>
              </h3>
              <div class="text-sm text-gray-700">
                <div id="healthAlertsText">
                  <p>• Monkeypox outbreak spreading nationwide (May 2025)</p>
                  <p>• Avoid contact with wild animals</p>
                  <p>• Isolate if rash/fever develops</p>
                </div>
                <div id="healthAlertsTextKrio" class="hidden">
                  <p>• Monkeypox dey spread for all Salone (May 2025)</p>
                  <p>• No touch bush meat or wild animal</p>
                  <p>• Stay for house if you get rash or fever</p>
                </div>
              </div>
            </div>
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <h3 class="font-bold text-blue-800 mb-2 flex items-center">
                <i class="fas fa-map-marker-alt text-blue-600 mr-2"></i>
                <span id="quickLinksTitle">Quick Chats</span>
              </h3>
              <div class="grid grid-cols-2 gap-2">
                <button class="quick-action-btn bg-green-100 text-green-800" data-action="malaria">
                  <i class="fas fa-bug mr-1"></i>
                  <span id="malariaBtnText">Malaria</span>
                </button>
                <button class="quick-action-btn bg-yellow-100 text-yellow-800" data-action="pregnancy">
                  <i class="fas fa-baby mr-1"></i>
                  <span id="pregnancyBtnText">Pregnancy</span>
                </button>
                <button class="quick-action-btn bg-red-100 text-red-800" data-action="diarrhea">
                  <i class="fas fa-tint mr-1"></i>
                  <span id="diarrheaBtnText">Diarrhea</span>
                </button>
                <button class="quick-action-btn bg-purple-100 text-purple-800" data-action="hypertension">
                  <i class="fas fa-heartbeat mr-1"></i>
                  <span id="hypertensionBtnText">Hypertension</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Chat Interface -->
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-green-600 p-3">
          <h2 class="text-white font-bold flex items-center">
            <i class="fas fa-comments mr-2"></i>
            <span id="chatTitle">Chat with DoxaCare AI</span>
          </h2>
        </div>
        <div id="chatWindow" class="h-64 overflow-y-auto p-4 bg-gray-50">
          <div class="chat-message bot-message mb-3">
            <div class="bg-white p-3 rounded-lg shadow-sm max-w-3/4 inline-block">
              <p id="welcomeChatText">Hello! How can I assist you with your health today? You can describe symptoms, ask for advice, or find clinics near you.</p>
              <p id="welcomeChatTextKrio" class="hidden">How you dey? Wetin I fit do for you health today? You fit talk about sick wey you get, ask for advice, or find clinic close to you.</p>
              <div class="quick-reply-buttons mt-2 flex flex-wrap gap-2">
                <button class="quick-reply-btn bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full">I have fever</button>
                <button class="quick-reply-btn bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full">Mosquito bite advice</button>
                <button class="quick-reply-btn bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full">Find clinic near me</button>
              </div>
            </div>
          </div>
        </div>
        <div class="p-3 bg-gray-100 border-t border-gray-200">
          <div class="flex items-center">
            <input type="text" id="userInput" placeholder="Type your health question here..." class="flex-grow px-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
            <button id="sendBtn" class="ml-2 bg-green-600 text-white p-2 rounded-full hover:bg-green-700 transition-colors">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
      
      <!-- Cultural Feature Section -->
      <div class="mt-6 bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-gradient-to-r from-yellow-400 to-green-600 p-3">
          <h2 class="text-white font-bold flex items-center">
            <i class="fas fa-globe-africa mr-2"></i>
            <span id="culturalTitle">Cultural Health Tips</span>
          </h2>
        </div>
        <div class="p-4">
          <div class="flex flex-col md:flex-row items-center">
            <img src="Lumley-beach-in-Freetown-Sierra-Leone-jpg.webp" alt="Lumley Beach in Freetown, Sierra Leone" class="w-32 h-32 md:w-48 md:h-48 object-cover rounded-lg shadow mb-4 md:mb-0 md:mr-4">
            <div>
              <h3 class="font-semibold text-green-800 mb-2" id="localTipTitle">Local Health Wisdom</h3>
              <div id="culturalTipText" class="text-gray-700">
                <p>• Boil water for drinking to prevent waterborne diseases.</p>
                <p>• Use insecticide-treated nets (ITNs) every night during rainy season.</p>
                <p>• Sun-dry clothes thoroughly to kill germs.</p>
              </div>
              <div id="culturalTipTextKrio" class="text-gray-700 hidden">
                <p>• Make water hot well-well before you drink am to stop water sickness.</p>
                <p>• Use net wey get medicine for kill mosquito every night when rain dey fall.</p>
                <p>• Make sun dry your clothes proper to kill all germ.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Symptom Checker Tab -->
    <div id="symptoms-tab" class="tab-content hidden">
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-blue-600 p-3 flex justify-between items-center">
          <h2 class="text-white font-bold flex items-center">
            <i class="fas fa-notes-medical mr-2"></i>
            <span>Health Topics</span>
          </h2>
          <button id="refreshHealthTopics" class="text-white hover:text-blue-200 transition-colors" title="Refresh health topics">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
        <div class="p-4">
          <div id="symptomInputArea" class="mb-4">
            <label for="symptomsInput" class="block text-gray-700 mb-2">Ask about any health topic:</label>
            <div class="flex">
              <input type="text" id="symptomsInput" class="flex-grow px-4 py-2 rounded-l-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g. fever, exercise tips, nutrition advice">
              <button id="checkSymptomsBtn" class="bg-blue-600 text-white px-4 py-2 rounded-r-lg hover:bg-blue-700">Ask</button>
            </div>
          </div>
          <div id="symptomResults" class="hidden border-t pt-4">
            <h3 class="font-semibold text-gray-800 mb-3">Possible Conditions:</h3>
            <!-- Results will be inserted here by JavaScript -->
          </div>
          <div class="mt-4 p-3 bg-gray-100 rounded-lg">
            <h4 class="font-medium text-gray-700 mb-2">Common Health Topics:</h4>
            <div class="grid grid-cols-2 gap-2">
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm" data-symptoms="fever,chills,headache,muscle pain">Malaria</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm" data-symptoms="fever,abdominal pain,constipation,diarrhea">Typhoid</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm" data-symptoms="watery diarrhea,vomiting,dehydration">Cholera</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm" data-symptoms="high fever,severe headache,eye pain,muscle pain">Dengue</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm" data-symptoms="cough,fever,difficulty breathing">Pneumonia</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm" data-symptoms="fever,headache,stiff neck,sensitivity to light">Meningitis</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm" data-symptoms="fever,skin rash,conjunctivitis,muscle pain">Lassa Fever</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm" data-symptoms="fever,cough,loss of taste/smell,difficulty breathing">COVID-19</button>
            </div>
          </div>
          <div class="mt-4 p-3 bg-gray-100 rounded-lg">
            <h4 class="font-medium text-gray-700 mb-2">Common Symptoms:</h4>
            <div class="flex flex-wrap gap-2">
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded-full text-sm">Fever</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded-full text-sm">Exercise</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded-full text-sm">Nutrition</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded-full text-sm">Pregnancy</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded-full text-sm">Diabetes</button>
              <button class="symptom-tag bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded-full text-sm">Mental Health</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Health Advice Forum Tab -->
    <div id="advice-tab" class="tab-content hidden">
      
    </div>
    
    <!-- Find Clinics Tab -->
    <div id="clinics-tab" class="tab-content hidden">
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-red-600 p-3">
          <h2 class="text-white font-bold flex items-center">
            <i class="fas fa-hospital mr-2"></i>
            <span>Find Clinics</span>
          </h2>
        </div>
        <div class="p-4">
          <div class="mb-4">
            <label for="locationInput" class="block text-gray-700 mb-2">Enter your location (district or city):</label>
            <div class="flex">
              <input type="text" id="locationInput" class="flex-grow px-4 py-2 rounded-l-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="e.g. Freetown, Bo, Kenema">
              <button id="findClinicsBtn" class="bg-red-600 text-white px-4 py-2 rounded-r-lg hover:bg-red-700">Search</button>
            </div>
          </div>
          <div id="clinicResults" class="space-y-4">
            <!-- Sample clinic cards - will be replaced by dynamic content -->
            <div class="border border-gray-200 rounded-lg p-3">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-semibold text-gray-800">Connaught Hospital</h3>
                  <p class="text-sm text-gray-600">Freetown • Government Hospital</p>
                </div>
                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">24-Hour</span>
              </div>
              <div class="mt-2 flex items-center text-sm">
                <i class="fas fa-phone-alt text-blue-500 mr-2"></i>
                <span>+232 25 345678</span>
              </div>
              <div class="mt-1 flex items-center text-sm">
                <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                <span>Lightfoot Boston St, Freetown</span>
              </div>
            </div>
            <div class="border border-gray-200 rounded-lg p-3">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-semibold text-gray-800">Bo Government Hospital</h3>
                  <p class="text-sm text-gray-600">Bo • Government Hospital</p>
                </div>
              </div>
              <div class="mt-2 flex items-center text-sm">
                <i class="fas fa-phone-alt text-blue-500 mr-2"></i>
                <span>+232 76 345678</span>
              </div>
              <div class="mt-1 flex items-center text-sm">
                <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                <span>Kissi Town, Bo</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
  </main>

  <!-- Footer -->
  <footer class="bg-green-800 text-white py-6">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <h3 class="font-bold mb-3">Doxacare AI</h3>
          <p class="text-sm">Providing trusted healthcare advice for Sierra Leone</p>
          <div class="mt-3">
            <p class="text-sm"><i class="fas fa-phone-alt mr-2"></i> Emergency: 117, 112</p>
          </div>
        </div>
        <div>
          <h3 class="font-bold mb-3">Important Links</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="https://www.who.int/countries/sle" target="_blank" class="hover:underline">WHO Sierra Leone</a></li>
            <li><a href="https://mohs.gov.sl" target="_blank" class="hover:underline">Sierra Leone Ministry of Health</a></li>
            <li><a href="https://www.nmcp.gov.sl" target="_blank" class="hover:underline">National Malaria Control Program</a></li>
            <li><a href="https://www.unicef.org/sierraleone/health" target="_blank" class="hover:underline">UNICEF Child Health</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-bold mb-3">Disclaimer</h3>
          <p class="text-xs">EvaCare AI provides general health information only and does not replace professional medical advice. Always consult a qualified healthcare provider for diagnosis and treatment.</p>
        </div>
      </div>
      <div class="border-t border-green-700 mt-6 pt-4 text-center text-sm">
        <p>© 2025 DoxaCare AI - Healthcare Assistant for Sierra Leone</p>
      </div>
    </div>
  </footer>

  <!-- Emergency Modal -->
  <div id="emergencyModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold text-red-600">
          <i class="fas fa-exclamation-triangle mr-2"></i>
          Emergency Assistance
        </h3>
        <button id="closeEmergencyModal" class="text-gray-500 hover:text-gray-700">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <p class="text-gray-700 mb-4">If you're experiencing a medical emergency, please take these immediate actions:</p>
      <ul class="space-y-2 mb-4">
        <li class="flex items-start">
          <i class="fas fa-phone-alt text-red-500 mt-1 mr-2"></i>
          <span>Call emergency services: <strong>117 or 112</strong></span>
        </li>
        <li class="flex items-start">
          <i class="fas fa-hospital text-red-500 mt-1 mr-2"></i>
          <span>Go to the nearest hospital immediately</span>
        </li>
        <li class="flex items-start">
          <i class="fas fa-user-md text-red-500 mt-1 mr-2"></i>
          <span>Alert someone nearby for assistance</span>
        </li>
      </ul>
      <div class="bg-red-50 border border-red-200 rounded p-3 mb-4">
        <p class="text-sm text-red-700">Call 117 or go to the closest medical facility immediately if you experience:</p>
        <ul class="list-disc list-inside text-sm text-red-700 mt-1 pl-2">
          <li>Difficulty breathing</li>
          <li>Chest pain</li>
          <li>Severe bleeding</li>
          <li>Loss of consciousness</li>
        </ul>
      </div>
      <button id="callEmergencyBtn" class="w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg">
        <i class="fas fa-phone mr-2"></i> Call Emergency Services Now
      </button>
    </div>
  </div>

  <script>
    // Install Firebase CLI (run this command in terminal)
    // npm install -g firebase-tools
    
    // Language Toggle
    const languageToggle = document.getElementById('languageToggle');
    const currentLanguage = document.getElementById('currentLanguage');
    const welcomeText = document.getElementById('welcomeText');
    const welcomeTextKrio = document.getElementById('welcomeTextKrio');
    const welcomeChatText = document.getElementById('welcomeChatText');
    const welcomeChatTextKrio = document.getElementById('welcomeChatTextKrio');
    const healthAlertsText = document.getElementById('healthAlertsText');
    const healthAlertsTextKrio = document.getElementById('healthAlertsTextKrio');
    const culturalTipText = document.getElementById('culturalTipText');
    const culturalTipTextKrio = document.getElementById('culturalTipTextKrio');
    const malariaBtnText = document.getElementById('malariaBtnText');
    const pregnancyBtnText = document.getElementById('pregnancyBtnText');
    const diarrheaBtnText = document.getElementById('diarrheaBtnText');
    const hypertensionBtnText = document.getElementById('hypertensionBtnText');
    const chatTitle = document.getElementById('chatTitle');
    const welcomeTitle = document.getElementById('welcomeTitle');
    const culturalTitle = document.getElementById('culturalTitle');
    const localTipTitle = document.getElementById('localTipTitle');
    const healthAlertsTitle = document.getElementById('healthAlertsTitle');
    const quickLinksTitle = document.getElementById('quickLinksTitle');
    
    let isEnglish = false;
    
    languageToggle.addEventListener('click', () => {
      isEnglish = !isEnglish;
      
      if (isEnglish) {
        currentLanguage.textContent = 'English';
        welcomeText.classList.remove('hidden');
        welcomeTextKrio.classList.add('hidden');
        healthAlertsText.classList.remove('hidden');
        healthAlertsTextKrio.classList.add('hidden');
        welcomeChatText.classList.remove('hidden');
        welcomeChatTextKrio.classList.add('hidden');
        culturalTipText.classList.remove('hidden');
        culturalTipTextKrio.classList.add('hidden');
        malariaBtnText.textContent = 'Malaria';
        pregnancyBtnText.textContent = 'Pregnancy';
        diarrheaBtnText.textContent = 'Diarrhea';
        hypertensionBtnText.textContent = 'Hypertension';
        chatTitle.textContent = 'Chat with EvaCare AI';
        culturalTitle.textContent = 'Cultural Health Tips';
        localTipTitle.textContent = 'Local Health Wisdom';
        healthAlertsTitle.textContent = 'Health Alerts';
        quickLinksTitle.textContent = 'Quick Chats';
      } else {
        currentLanguage.textContent = 'Krio';
        welcomeText.classList.add('hidden');
        welcomeTextKrio.classList.remove('hidden');
        healthAlertsText.classList.add('hidden');
        healthAlertsTextKrio.classList.remove('hidden');
        welcomeChatText.classList.add('hidden');
        welcomeChatTextKrio.classList.remove('hidden');
        culturalTipText.classList.add('hidden');
        culturalTipTextKrio.classList.remove('hidden');
        malariaBtnText.textContent = 'Malaria';
        pregnancyBtnText.textContent = 'Belleful';
        diarrheaBtnText.textContent = 'Run belle';
        hypertensionBtnText.textContent = 'High BP';
        chatTitle.textContent = 'Chat wit EvaCare AI';
        culturalTitle.textContent = 'Health Tip for We Culture';
        localTipTitle.textContent = 'Local Health Sense';
        healthAlertsTitle.textContent = 'Health News';
        quickLinksTitle.textContent = 'Quick Chat';
      }
    });
    
    // Tab Switching
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabId = button.getAttribute('data-tab');
        
        // Update active state for buttons
        tabButtons.forEach(btn => btn.classList.remove('active', 'text-green-700', 'border-green-700'));
        button.classList.add('active', 'text-green-700', 'border-green-700');
        
        // Update active state for tab contents
        tabContents.forEach(content => {
          content.classList.add('hidden');
          content.classList.remove('active');
        });
        
        document.getElementById(`${tabId}-tab`).classList.remove('hidden');
        document.getElementById(`${tabId}-tab`).classList.add('active');
      });
    });
    
    // Quick Action Buttons
    const quickActionBtns = document.querySelectorAll('.quick-action-btn');
    
    quickActionBtns.forEach(button => {
      button.addEventListener('click', () => {
        const action = button.getAttribute('data-action');
        const chatWindow = document.getElementById('chatWindow');
        
        switch(action) {
          case 'malaria':
            addUserMessage('malaria prevention');
            simulateBotResponse('Malaria prevention is crucial in Sierra Leone. Use insecticide-treated mosquito nets every night, wear protective clothing in the evening, and eliminate stagnant water around your home where mosquitoes breed. If you experience fever, headache, or chills, seek medical attention immediately as these could be malaria symptoms.');
            break;
          case 'pregnancy':
            addUserMessage('pregnancy care');
            simulateBotResponse('For healthy pregnancy: Attend all antenatal check-ups, take prescribed iron and folic acid supplements, eat nutritious meals, and learn about danger signs like severe headaches, blurred vision, or reduced fetal movement. Always have a skilled birth attendant during delivery.');
            break;
          case 'diarrhea':
            addUserMessage('diarrhea treatment');
            simulateBotResponse('For diarrhea: Drink oral rehydration solution (ORS) frequently to prevent dehydration. Continue breastfeeding infants more often. Seek medical help if diarrhea persists more than 2 days, contains blood, or if dehydration signs (dry mouth, sunken eyes, less urination) appear.');
            break;
          case 'hypertension':
            addUserMessage('hypertension management');
            simulateBotResponse('Managing high blood pressure: Reduce salt intake, exercise regularly, maintain healthy weight, limit alcohol, and take prescribed medications consistently. Monitor blood pressure weekly and contact your doctor if readings are consistently high (above 140/90).');
            break;
        }
        
        // Switch to chat tab
        tabButtons.forEach(btn => btn.classList.remove('active', 'text-green-700', 'border-green-700'));
        document.querySelector('.tab-btn[data-tab="home"]').classList.add('active', 'text-green-700', 'border-green-700');
        tabContents.forEach(content => {
          content.classList.add('hidden');
          content.classList.remove('active');
        });
        document.getElementById('home-tab').classList.remove('hidden');
        document.getElementById('home-tab').classList.add('active');
        
        // Scroll to chat
        chatWindow.scrollTop = chatWindow.scrollHeight;
      });
    });
    
    // Symptom Checker
    const checkSymptomsBtn = document.getElementById('checkSymptomsBtn');
    const symptomsInput = document.getElementById('symptomsInput');
    const symptomResults = document.getElementById('symptomResults');
    
    checkSymptomsBtn.addEventListener('click', () => {
      const symptoms = symptomsInput.value.trim();
      
      if (symptoms) {
        // Show loading state
        symptomResults.innerHTML = `
          <div class="flex items-center justify-center py-4">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
            <span class="ml-3">Analyzing symptoms...</span>
          </div>
        `;
        symptomResults.classList.remove('hidden');
        
        // Simulate API call delay
        setTimeout(() => {
          let conditions = [];
          let advice = '';
          
          // Enhanced symptom matching with detailed condition information
          if (symptoms.toLowerCase().includes('fever') && 
              (symptoms.toLowerCase().includes('headache') || symptoms.toLowerCase().includes('chills'))) {
            conditions.push({
              name: 'Possible Malaria',
              description: 'A life-threatening parasitic disease transmitted through mosquito bites',
              symptoms: '• High fever (often cyclical)\n• Chills and sweating\n• Headache\n• Muscle/joint pain\n• Fatigue\n• Nausea/vomiting',
              treatment: '• Rapid diagnostic test required\n• Artemisinin-based combination therapy (ACT)\n• IV quinine for severe cases\n• Complete full medication course',
              prevention: '• Use insecticide-treated nets (ITNs)\n• Indoor residual spraying\n• Wear protective clothing\n• Eliminate standing water',
              emergency: 'Seek immediate care for:\n• Impaired consciousness\n• Multiple convulsions\n• Difficulty breathing\n• Severe bleeding\n• Clinical jaundice'
            });
            advice = 'Malaria is endemic in Sierra Leone. Get tested immediately at a clinic.';
          }
          
          if (symptoms.toLowerCase().includes('cough') && 
              (symptoms.toLowerCase().includes('fever') || symptoms.toLowerCase().includes('difficulty breathing'))) {
            conditions.push({
              name: 'Possible Respiratory Infection',
              description: 'Infection affecting lungs and airways, ranging from mild to severe',
              symptoms: '• Cough (dry or productive)\n• Fever\n• Shortness of breath\n• Chest pain\n• Nasal congestion\n• Fatigue',
              treatment: '• Rest and hydration\n• Antipyretics for fever\n• Antibiotics if bacterial\n• Antivirals for influenza\n• Steam inhalation',
              prevention: '• Frequent handwashing\n• Cover coughs/sneezes\n• Avoid close contact with sick people\n• Get vaccinated (flu, COVID-19)',
              emergency: 'Emergency signs:\n• Blue lips/face\n• Chest indrawing\n• Inability to drink\n• Severe respiratory distress'
            });
            advice = 'Respiratory infections can become serious. Monitor symptoms closely.';
          }
          
          if (symptoms.toLowerCase().includes('diarrhea') && 
              (symptoms.toLowerCase().includes('vomiting') || symptoms.toLowerCase().includes('stomach pain'))) {
            conditions.push({
              name: 'Possible Gastroenteritis',
              description: 'Inflammation of stomach and intestines from infection',
              symptoms: '• Watery diarrhea\n• Vomiting\n• Abdominal cramps\n• Low-grade fever\n• Dehydration signs',
              treatment: '• Oral rehydration solution (ORS)\n• Zinc supplements\n• Continued feeding\n• Antibiotics if bacterial',
              prevention: '• Handwashing with soap\n• Safe water/food preparation\n• Proper sanitation\n• Rotavirus vaccination',
              emergency: 'Seek care for:\n• Blood in stool\n• No urine >12 hours\n• Sunken eyes\n• Lethargy\n• High fever'
            });
            advice = 'Diarrheal diseases can lead to dangerous dehydration.';
          }
          
          if (conditions.length === 0) {
            conditions.push({
              name: 'General Symptoms',
              description: 'Non-specific symptoms requiring monitoring',
              symptoms: '• Fatigue\n• Mild fever\n• Body aches\n• General discomfort',
              treatment: '• Rest\n• Hydration\n• Symptom monitoring\n• Basic pain/fever relief',
              prevention: '• Maintain good hygiene\n• Balanced nutrition\n• Adequate sleep\n• Stress management',
              emergency: 'Seek care if:\n• Symptoms worsen\n• New concerning symptoms appear\n• No improvement in 48 hours'
            });
            advice = 'Monitor symptoms and seek care if they persist or worsen.';
          }
          
          // Display results with detailed conditions list
          let conditionsHTML = `
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3">
              <h4 class="font-medium text-blue-800 mb-3 flex items-center">
                <i class="fas fa-diagnoses mr-2"></i>
                Possible Conditions Based on Your Symptoms:
              </h4>
              ${conditions.map(cond => `
                <div class="mb-4 last:mb-0">
                  <h5 class="font-semibold text-blue-700">${cond.name}</h5>
                  <p class="text-sm text-gray-600 mb-1">${cond.description}</p>
                  
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-2">
                    <div class="bg-white p-2 rounded border">
                      <h6 class="text-xs font-medium text-gray-500">Symptoms</h6>
                      <p class="text-sm whitespace-pre-line">${cond.symptoms}</p>
                    </div>
                    <div class="bg-white p-2 rounded border">
                      <h6 class="text-xs font-medium text-gray-500">Treatment</h6>
                      <p class="text-sm whitespace-pre-line">${cond.treatment}</p>
                    </div>
                    <div class="bg-white p-2 rounded border">
                      <h6 class="text-xs font-medium text-gray-500">Prevention</h6>
                      <p class="text-sm whitespace-pre-line">${cond.prevention}</p>
                    </div>
                    <div class="bg-white p-2 rounded border">
                      <h6 class="text-xs font-medium text-gray-500">Emergency Signs</h6>
                      <p class="text-sm whitespace-pre-line">${cond.emergency}</p>
                    </div>
                  </div>
                </div>
              `).join('')}
              <div class="mt-3 text-xs text-gray-500">
                <i class="fas fa-info-circle mr-1"></i>
                Note: This is not a diagnosis. Please consult a healthcare provider for proper evaluation.
              </div>
            </div>
          `;
          
          symptomResults.innerHTML = `
            ${conditionsHTML}
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
              <h4 class="font-medium text-yellow-800 mb-2">
                <i class="fas fa-lightbulb mr-2"></i>
                Recommended Actions
              </h4>
              <p class="text-gray-700">${advice}</p>
              <div class="mt-3 space-y-2">
                <div class="flex items-center">
                  <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                  <input type="text" id="symptomLocationInput" class="flex-grow px-3 py-1 border border-gray-300 rounded text-sm" placeholder="Enter your location for clinics">
                </div>
                <div class="flex space-x-2">
                  <button id="findClinicFromSymptoms" class="bg-red-100 text-red-800 px-3 py-1 rounded text-sm hover:bg-red-200">
                    <i class="fas fa-hospital mr-1"></i> Find nearest clinic
                  </button>
                </div>
              </div>
            </div>
          `;

          
          // Add event listener to the find clinic button
          document.getElementById('findClinicFromSymptoms').addEventListener('click', () => {
            const location = document.getElementById('symptomLocationInput').value.trim();
            if (location) {
              // Set location in clinics tab
              document.getElementById('locationInput').value = location;
              // Trigger clinic search
              document.getElementById('findClinicsBtn').click();
              // Switch to clinics tab
              tabButtons.forEach(btn => btn.classList.remove('active', 'text-green-700', 'border-green-700'));
              document.querySelector('.tab-btn[data-tab="clinics"]').classList.add('active', 'text-green-700', 'border-green-700');
              tabContents.forEach(content => {
                content.classList.add('hidden');
                content.classList.remove('active');
              });
              document.getElementById('clinics-tab').classList.remove('hidden');
              document.getElementById('clinics-tab').classList.add('active');
            } else {
              alert('Please enter your location to find clinics.');
            }
          });
        }, 1500);
      } else {
        alert('Please enter at least one symptom.');
      }
    });
    
    // Health Topics Refresh
    const refreshHealthTopicsBtn = document.getElementById('refreshHealthTopics');
    refreshHealthTopicsBtn.addEventListener('click', () => {
      // Show loading state
      const symptomResults = document.getElementById('symptomResults');
      symptomResults.innerHTML = `
        <div class="flex items-center justify-center py-4">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
          <span class="ml-3">Refreshing health topics...</span>
        </div>
      `;
      symptomResults.classList.remove('hidden');
      
      // Simulate refresh delay
      setTimeout(() => {
        symptomResults.innerHTML = '';
        symptomResults.classList.add('hidden');
        document.getElementById('symptomsInput').value = '';
      }, 1000);
    });

    // Symptom Tag Buttons
    const symptomTags = document.querySelectorAll('.symptom-tag');
    
    symptomTags.forEach(tag => {
      tag.addEventListener('click', () => {
        const symptoms = tag.getAttribute('data-symptoms');
        symptomsInput.value = symptoms;
        checkSymptomsBtn.click();
      });
    });
    
    // Find Clinics
    const findClinicsBtn = document.getElementById('findClinicsBtn');
    const locationInput = document.getElementById('locationInput');
    
    findClinicsBtn.addEventListener('click', () => {
      const location = locationInput.value.trim();
      
      if (location) {
        // Show loading state
        const clinicResults = document.getElementById('clinicResults');
        clinicResults.innerHTML = `
          <div class="flex items-center justify-center py-4">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"></div>
            <span class="ml-3">Searching for clinics in ${location}...</span>
          </div>
        `;
        
        // Simulate API call delay
        setTimeout(() => {
          let clinics = [];
          
          // Mock data for districts
          const districtMap = {
            'freetown': [
              {
                name: 'Connaught Hospital',
                location: 'Lightfoot Boston St, Freetown',
                phone: '+232 25 345678',
                type: 'Government Hospital',
                is24Hour: true
              },
              {
                name: 'Lumley Government Hospital',
                location: 'Lumley, Freetown',
                phone: '+232 76 543210',
                type: 'Government Hospital',
                is24Hour: false
              },
              {
                name: 'Cottage Hospital',
                location: 'Fourah Bay Road, Freetown',
                phone: '+232 22 221234',
                type: 'Private Hospital',
                is24Hour: true
              }
            ],
            'bo': [
              {
                name: 'Bo Government Hospital',
                location: 'Kissi Town, Bo',
                phone: '+232 76 345678',
                type: 'Government Hospital',
                is24Hour: true
              },
              {
                name: 'Mercy Hospital',
                location: 'Tikonko Rd, Bo',
                phone: '+232 33 567890',
                type: 'Private Hospital',
                is24Hour: false
              },
              {
                name: 'St. Francis Health Center',
                location: 'Dambala Rd, Bo',
                phone: '+232 76 789012',
                type: 'Clinic',
                is24Hour: false
              }
            ],
            'kenema': [
              {
                name: 'Kenema Government Hospital',
                location: 'Hanga Rd, Kenema',
                phone: '+232 78 123456',
                type: 'Government Hospital',
                is24Hour: true
              },
              {
                name: 'Holy Spirit Hospital',
                location: 'Dama Rd, Kenema',
                phone: '+232 78 654321',
                type: 'Mission Hospital',
                is24Hour: true
              }
            ],
            'makeni': [
              {
                name: 'Makeni Government Hospital',
                location: 'Magburaka Rd, Makeni',
                phone: '+232 77 112233',
                type: 'Government Hospital',
                is24Hour: true
              },
              {
                name: 'Binkolo Community Health Center',
                location: 'Binkolo, Makeni',
                phone: '+232 77 445566',
                type: 'Clinic',
                is24Hour: false
              }
            ],
            'koidu': [
              {
                name: 'Koidu Government Hospital',
                location: 'Mines Rd, Koidu',
                phone: '+232 77 778899',
                type: 'Government Hospital',
                is24Hour: true
              },
              {
                name: 'Mines Medical Center',
                location: 'Koidu Mines Area',
                phone: '+232 77 001122',
                type: 'Company Hospital',
                is24Hour: true
              }
            ],
            'port loko': [
              {
                name: 'Port Loko Government Hospital',
                location: 'Rokel St, Port Loko',
                phone: '+232 76 334455',
                type: 'Government Hospital',
                is24Hour: true
              },
              {
                name: 'Mercy Community Health Center',
                location: 'Gbinti Rd, Port Loko',
                phone: '+232 77 667788',
                type: 'Clinic',
                is24Hour: false
              }
            ],
            'kambia': [
              {
                name: 'Kambia Government Hospital',
                location: 'Mange Bureh Rd, Kambia',
                phone: '+232 77 998877',
                type: 'Government Hospital',
                is24Hour: false
              }
            ],
            'kailahun': [
              {
                name: 'Kailahun Government Hospital',
                location: 'Luawa Rd, Kailahun',
                phone: '+232 77 665544',
                type: 'Government Hospital',
                is24Hour: true
              },
              {
                name: 'Segbwema Community Health Center',
                location: 'Segbwema Town',
                phone: '+232 76 223344',
                type: 'Clinic',
                is24Hour: false
              }
            ],
            'default': [
              {
                name: 'General Advice',
                location: '',
                phone: '', 
                type: '',
                is24Hour: false,
                advice: 'For medical facilities in your area, visit the local health center or district hospital. In emergencies, call 117. Major district hospitals include:\n\n' +
                        '• Freetown - Connaught Hospital\n' +
                        '• Bo - Bo Government Hospital\n' + 
                        '• Kenema - Kenema Government Hospital\n' +
                        '• Makeni - Makeni Government Hospital\n' +
                        '• Koidu - Koidu Government Hospital\n' +
                        '• Port Loko - Port Loko Government Hospital\n' +
                        '• Kambia - Kambia Government Hospital\n' +
                        '• Kailahun - Kailahun Government Hospital'
              }
            ]
          };

          // Find matching districts
          clinics = [];
          for (const [district, facilities] of Object.entries(districtMap)) {
            if (location.toLowerCase().includes(district)) {
              clinics = [...facilities];
              break;
            }
          }

          if (clinics.length === 0) {
            clinics = districtMap.default;
          }
          
          // Display results
          let clinicsHTML = clinics.map(clinic => {
            if (clinic.advice) {
              return `
                <div class="border border-gray-200 rounded-lg p-3">
                  <p class="text-gray-700">${clinic.advice}</p>
                </div>
              `;
            } else {
              return `
                <div class="border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow">
                  <div class="flex justify-between items-start">
                    <div>
                      <h3 class="font-semibold text-gray-800">${clinic.name}</h3>
                      <p class="text-sm text-gray-600">${clinic.location} • ${clinic.type}</p>
                    </div>
                    ${clinic.is24Hour ? '<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">24-Hour</span>' : ''}
                  </div>
                  ${clinic.phone ? `
                  <div class="mt-2 flex items-center text-sm">
                    <i class="fas fa-phone-alt text-blue-500 mr-2"></i>
                    <span>${clinic.phone}</span>
                  </div>` : ''}
                  <div class="mt-1 flex items-center text-sm">
                    <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                    <span>${clinic.location}</span>
                  </div>
                </div>
              `;
            }
          }).join('');
          
          clinicResults.innerHTML = clinicsHTML;
        }, 1200);
      } else {
        alert('Please enter a location to search for clinics.');
      }
    });
    
    // Chat Functionality
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');
    const chatWindow = document.getElementById('chatWindow');
    const quickReplyBtns = document.querySelectorAll('.quick-reply-btn');
    
    // Add event listener for quick reply buttons
    quickReplyBtns.forEach(button => {
      button.addEventListener('click', () => {
        const message = button.textContent.trim();
        addUserMessage(message);
        processUserMessage(message);
      });
    });
    
    // Send message on button click
    sendBtn.addEventListener('click', sendMessage);
    
    // Send message on Enter key
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessage();
      }
    });
    
    function sendMessage() {
      const message = userInput.value.trim();
      
      if (message) {
        addUserMessage(message);
        processUserMessage(message);
        userInput.value = '';
      }
    }
    
    function addUserMessage(message) {
      const messageDiv = document.createElement('div');
      messageDiv.className = 'chat-message user-message mb-3 flex justify-end';
      messageDiv.innerHTML = `
        <div class="bg-green-100 p-3 rounded-lg shadow-sm max-w-3/4 inline-block">
          <p>${message}</p>
        </div>
      `;
      chatWindow.appendChild(messageDiv);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }
    
    function addBotMessage(message, quickReplies = []) {
      const messageDiv = document.createElement('div');
      messageDiv.className = 'chat-message bot-message mb-3';
      
      let quickRepliesHTML = '';
      if (quickReplies.length > 0) {
        quickRepliesHTML = `
          <div class="quick-reply-buttons mt-2 flex flex-wrap gap-2">
            ${quickReplies.map(reply => 
              `<button class="quick-reply-btn bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full">${reply}</button>`
            ).join('')}
          </div>
        `;
      }
      
      messageDiv.innerHTML = `
        <div class="bg-white p-3 rounded-lg shadow-sm max-w-3/4 inline-block">
          <p>${message}</p>
          ${quickRepliesHTML}
        </div>
      `;
      
      chatWindow.appendChild(messageDiv);
      
      // Add event listeners to new quick reply buttons
      messageDiv.querySelectorAll('.quick-reply-btn').forEach(button => {
        button.addEventListener('click', () => {
          const message = button.textContent.trim();
          addUserMessage(message);
          processUserMessage(message);
        });
      });
      
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }
    
    function simulateBotResponse(message, quickReplies = []) {
      // Show typing indicator
      const typingIndicator = document.createElement('div');
      typingIndicator.className = 'chat-message bot-message mb-3 typing-indicator';
      typingIndicator.innerHTML = `
        <div class="bg-white p-3 rounded-lg shadow-sm w-16">
          <span></span>
        </div>
      `;
      chatWindow.appendChild(typingIndicator);
      chatWindow.scrollTop = chatWindow.scrollHeight;
      
      // Remove typing indicator and add actual response after delay
      setTimeout(() => {
          chatWindow.removeChild(typingIndicator);
          addBotMessage(message, quickReplies);
      }, 1500); 
  }

    async function processUserMessage(message) {
        try {
            // Prepare loading message
            const loadingMessage = document.createElement('div');
            loadingMessage.className = 'chat-message bot-message mb-3';
            loadingMessage.innerHTML = `
                <div class="bg-white p-3 rounded-lg shadow-sm max-w-3/4 inline-block">
                    <p>DoxaCare AI is thinking...</p>
                </div>
            `;
            chatWindow.appendChild(loadingMessage);
            chatWindow.scrollTop = chatWindow.scrollHeight;

            const response = await fetch('https://api.botpress.cloud/v1/chatbots/bp_bak_-szirpnF0wejfmSYq5bEJCOqKQniiCNU2JGZ/conversations', { // Replace with your Bot ID
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    type: 'text',
                    text: message
                })
            });
            const data = await response.json();
            const botResponse = data.messages.map(msg => msg.payload.text).join('\n');  // Assuming text responses
            simulateBotResponse(botResponse);
        } catch (error) {
            console.error('Error communicating with Botpress:', error);
            simulateBotResponse('I am experiencing a temporary issue. Please try again later.');
        } finally {
            chatWindow.removeChild(loadingMessage); // Ensure loading message is removed
        }
  }
    
  // Emergency conditions
      if (lowerMessage.includes('emergency') || 
          lowerMessage.includes('help') || 
          lowerMessage.includes('urgent') ||
          lowerMessage.includes('trouble breathing') ||
          lowerMessage.includes('can\'t breathe') ||
          lowerMessage.includes('severe pain') ||
          lowerMessage.includes('chest pain') ||
          lowerMessage.includes('unconscious') ||
          lowerMessage.includes('sever bleeding') ||
          lowerMessage.includes('fainting')) {
        // Emergency response
        simulateBotResponse('⚠️ EMERGENCY WARNING ⚠️\n\nBased on your symptoms, you should seek medical attention immediately. These could indicate life-threatening conditions:\n\n• Heart attack\n• Severe infection\n• Stroke\n• Severe trauma\n\n🚑 Please:\n1. Call 117 or 112 NOW\n2. Go to nearest hospital\n3. Have someone stay with you\n\nWould you like me to find the closest emergency facility?');
        showEmergencyModal();
      } else if (lowerMessage.includes('fever') || 
                 lowerMessage.includes('headache') ||
                 lowerMessage.includes('chills') ||
                 lowerMessage.includes('body ache') ||
                 lowerMessage.includes('symptom') ||
                 lowerMessage.includes('joint pain')) {
        // Enhanced symptom response with home remedies
        let response = "🤒 Symptom Analysis:\n\n";
        
        // Medical advice
        response += "🔹 Medical Recommendations:\n";
        response += "• Get tested for malaria if fever persists >48h\n";
        response += "• Take paracetamol for fever/pain (follow dosage)\n";
        response += "• Stay hydrated with clean water\n";
        response += "• Monitor temperature regularly\n\n";
        
        // Home remedies
        response += "🏠 Home Care & Traditional Remedies:\n";
        response += "• Ginger tea (boil fresh ginger) for pain relief\n";
        response += "• Neem leaf steam inhalation (antibacterial)\n";
        response += "• Papaya leaf extract (traditional malaria support)\n";
        response += "• Cold compress for forehead\n";
        response += "• Rest in well-ventilated space\n\n";
        
        // Holistic recommendations
        response += "🌿 Holistic Support:\n";
        response += "• Light stretching if muscles ache\n";
        response += "• Meditation to reduce stress on body\n";
        response += "• Herbal teas (lemongrass, moringa)\n";
        response += "• Maintain regular sleep schedule\n\n";
        
        response += "🚨 Seek medical care if:\n";
        response += "- Fever >39°C or lasts >3 days\n";
        response += "- Severe headache with stiff neck\n";
        response += "- Confusion or seizures occur\n";
        
        simulateBotResponse(response, ['More home remedies', 'Find testing center', 'Other symptoms']);
      } else if (lowerMessage.includes('fever') || 
                 lowerMessage.includes('headache') ||
                 lowerMessage.includes('chills') ||
                 lowerMessage.includes('body ache') ||
                 lowerMessage.includes('symptom') ||
                 lowerMessage.includes('joint pain')) {
        // Detailed symptom analysis with conditions
        let response = "🤒 Symptom Analysis:\n\nPossible conditions:\n";
        
        if (lowerMessage.includes('malaria') || lowerMessage.includes('mosquito')) {
          response += "1. Malaria (very likely)\n";
          response += "2. Typhoid fever\n";
          response += "3. Dengue fever\n";
          response += "4. Other viral infection\n\n";
          response += "🔴 HIGH likelihood of MALARIA\n\n";
          response += "🔹 Typical Symptoms:\n- High fever (often cyclical)\n- Chills/sweats\n- Headache\n- Muscle/joint pain\n- Fatigue\n- Nausea/vomiting\n\n";
          response += "🚨 Red Flags (Go to hospital IMMEDIATELY):\n- Confusion\n- Seizures\n- Blood in urine\n- Difficulty breathing\n- Very high fever (>39°C)\n\n";
          response += "💊 Recommended Actions:\n1. Get rapid diagnostic test TODAY\n2. Take antimalarials if prescribed\n3. Stay hydrated\n4. Use mosquito net\n\n";
          response += "Would you like more details about malaria treatment?";
          simulateBotResponse(response, ['Malaria treatment', 'Find testing center', 'Other symptoms I have']);
        } else {
          response += "Possible causes:\n\n";
          response += "1. Malaria (most common)\n2. Typhoid fever\n3. Respiratory infection\n4. Dengue fever\n5. Other viral infections\n\n";
          response += "🔍 To help identify:\n\n▪️ Malaria: Fever comes every 48h with chills\n▪️ Typhoid: Sustained fever, stomach pain\n▪️ Flu: Sudden fever with cough\n▪️ Dengue: Fever with severe pain behind eyes\n\n";
          response += "I recommend:\n1. Track fever pattern/temperature\n2. Note other symptoms\n3. Get tested if fever lasts >48h\n\nWould you like guidance specific to your symptoms?";
          simulateBotResponse(response, ['Describe malaria symptoms', 'I have stomach pain too', 'Find testing center']);
        }
      } else if (lowerMessage.includes('malaria') || 
                 lowerMessage.includes('mosquito')) {
        // Enhanced malaria advice with holistic approach
        if (isEnglish) {
          let response = "🦟 Malaria Prevention & Care:\n\n";
          response += "🔹 Medical Prevention:\n";
          response += "• Sleep under insecticide-treated nets (ITNs)\n";
          response += "• Take prophylaxis if prescribed\n";
          response += "• Get rapid test if symptoms appear\n\n";
          
          response += "🏠 Home & Traditional Remedies:\n";
          response += "• Neem leaves around sleeping area\n";
          response += "• Camphor in water containers\n";
          response += "• Papaya leaf tea (traditional remedy)\n";
          response += "• Turmeric in warm milk (anti-inflammatory)\n\n";
          
          response += "🌿 Holistic Support:\n";
          response += "• Stay hydrated with coconut water\n";
          response += "• Light meals (porridge, soups)\n";
          response += "• Rest in cool environment\n";
          response += "• Avoid strenuous activity during recovery\n\n";
          
          response += "🚨 Emergency signs:\n";
          response += "- Confusion/seizures\n";
          response += "- Blood in urine\n";
          response += "- Difficulty breathing\n";
          
          simulateBotResponse(response, 
            ['Find ITNs near me', 'Malaria symptoms', 'Home remedies']);
        } else {
          let response = "🦟 Malaria Prevention & Care (Krio):\n\n";
          response += "🔹 Medical Way:\n";
          response += "• Sleep under net wey get medicine\n";
          response += "• Take malaria prevention drug if doctor talk say\n";
          response += "• Do test if you get sign\n\n";
          
          response += "🏠 Home Way:\n";
          response += "• Put neem leaves for where you sleep\n";
          response += "• Put camphor for water container\n";
          response += "• Drink papaya leaf tea\n";
          response += "• Drink turmeric inside warm milk\n\n";
          
          response += "🌿 Other Help:\n";
          response += "• Drink coconut water\n";
          response += "• Eat light food like pap\n";
          response += "• Rest for cool place\n";
          response += "• No hard work when you sick\n\n";
          
          response += "🚨 Emergency sign:\n";
          response += "- You no dey think well\n";
          response += "- Blood for urine\n";
          response += "- You no fit breathe well\n";
          
          simulateBotResponse(response, 
            ['Find net close to me', 'Sign of malaria', 'Home remedy']);
        }
      } else if (lowerMessage.includes('clinic') || 
                 lowerMessage.includes('hospital') ||
                 lowerMessage.includes('find') ||
                 lowerMessage.includes('near me')) {
        // Find clinics
        simulateBotResponse('I can help you find clinics. What is your location (district or city name)? For example: "Freetown" or "Bo".');
      } else if (lowerMessage.includes('pregnant') || 
                 lowerMessage.includes('belleful') ||
                 lowerMessage.includes('birth')) {
        // Pregnancy advice
        simulateBotResponse('For a healthy pregnancy in Sierra Leone:\n1. Attend all antenatal visits\n2. Take iron and folic acid\n3. Sleep under mosquito nets\n4. Learn danger signs\n5. Plan for delivery at a health facility', 
          ['Pregnancy danger signs', 'Find maternity clinics', 'Malaria in pregnancy']);
      } else if (lowerMessage.includes('diarrhea') || 
                 lowerMessage.includes('run belle') ||
                 lowerMessage.includes('vomiting') ||
                 lowerMessage.includes('stomach pain')) {
        // Enhanced digestive health response
        let response = "🤢 Digestive Health Support:\n\n";
        
        response += "🔹 Medical Care:\n";
        response += "• ORS solution (1L water + 6tsp sugar + ½tsp salt)\n";
        response += "• Zinc supplements if available\n";
        response += "• Seek care if blood in stool or severe dehydration\n\n";
        
        response += "🏠 Home & Traditional Remedies:\n";
        response += "• Ginger tea (anti-nausea)\n";
        response += "• Coconut water (electrolytes)\n";
        response += "• Boiled rice water (soothing)\n";
        response += "• Charcoal tablets (traditional detox)\n";
        response += "• Mint leaves for stomach cramps\n\n";
        
        response += "🌿 Holistic Approach:\n";
        response += "• BRAT diet (Bananas, Rice, Applesauce, Toast)\n";
        response += "• Probiotic foods (fermented foods)\n";
        response += "• Chamomile tea (calming)\n";
        response += "• Warm compress on abdomen\n\n";
        
        response += "🚨 Danger signs:\n";
        response += "- Blood/mucus in stool\n";
        response += "- No urine >12 hours\n";
        response += "- Sunken eyes/extreme thirst\n";
        response += "- High fever with diarrhea\n";
        
        simulateBotResponse(response, 
          ['How to make ORS', 'Safe foods list', 'Find treatment center']);
      } else if (lowerMessage.includes('exercise') || 
                 lowerMessage.includes('workout') ||
                 lowerMessage.includes('physical activity')) {
        // Exercise advice
        simulateBotResponse('🏋️‍♂️ Exercise Recommendations:\n\nFor adults in Sierra Leone:\n• Aim for 150 minutes moderate activity weekly\n• Include strength training 2x/week\n• Walking is excellent exercise\n• Try traditional dances for cardio\n• Stay hydrated in the heat\n\nStart slow if new to exercise. Any movement is better than none!', 
          ['Best exercises', 'Exercise for seniors', 'Exercise with injuries']);
          
      } else if (lowerMessage.includes('nutrition') || 
                 lowerMessage.includes('diet') ||
                 lowerMessage.includes('food') ||
                 lowerMessage.includes('eat')) {
        // Nutrition advice
        simulateBotResponse('🍎 Healthy Eating Tips:\n\n• Eat plenty of local fruits/vegetables\n• Include protein (fish, beans, eggs)\n• Choose whole grains over refined\n• Limit salt, sugar and oily foods\n• Drink clean, safe water\n\nTraditional Sierra Leonean foods like cassava leaf, okra soup and groundnut stew can be very nutritious!', 
          ['Healthy local foods', 'Foods to avoid', 'Eating on budget']);
          
      } else if (lowerMessage.includes('mental') || 
                 lowerMessage.includes('stress') ||
                 lowerMessage.includes('anxiety') ||
                 lowerMessage.includes('depression')) {
        // Mental health advice
        simulateBotResponse('🧠 Mental Health Support:\n\n• Talk to someone you trust\n• Practice relaxation techniques\n• Maintain social connections\n• Get regular sleep\n• Limit alcohol/drugs\n\nFor serious concerns, contact:\n• 116 (Mental Health Helpline)\n• Local health centers\n• Religious/community leaders', 
          ['Coping techniques', 'Find counselor', 'Emergency help']);
          
      } else {
        // Default response
        simulateBotResponse('I can help with:\n• Symptoms (fever, pain)\n• Chronic conditions\n• Exercise & nutrition\n• Mental health\n• Pregnancy care\n• Finding clinics\nWhat would you like to know?', 
          ['Exercise tips', 'Nutrition advice', 'Mental health support', 'Find clinics']);
      }
    

    // Emergency Modal
    const emergencyModal = document.getElementById('emergencyModal');
    const emergencyBtn = document.getElementById('emergencyBtn');
    const closeEmergencyModal = document.getElementById('closeEmergencyModal');
    const callEmergencyBtn = document.getElementById('callEmergencyBtn');
    
    function showEmergencyModal() {
      emergencyModal.classList.remove('hidden');
    }
    
    function hideEmergencyModal() {
      emergencyModal.classList.add('hidden');
    }
    
    emergencyBtn.addEventListener('click', showEmergencyModal);
    closeEmergencyModal.addEventListener('click', hideEmergencyModal);
    callEmergencyBtn.addEventListener('click', () => {
      alert('Calling emergency services at 117. Please hold...');
      hideEmergencyModal();
    });
    
    // Close modal when clicking outside
    emergencyModal.addEventListener('click', (e) => {
      if (e.target === emergencyModal) {
        hideEmergencyModal();
      }
    });
    
    // Function to display WHO health alerts
    function displayHealthAlert(data) {
      if (data && data.length > 0) {
        const alertsContainer = document.getElementById('healthAlertsText');
        const alertsContainerKrio = document.getElementById('healthAlertsTextKrio');
        
        alertsContainer.innerHTML = '';
        alertsContainerKrio.innerHTML = '';
        
        data.slice(0, 3).forEach(alert => {
          const alertEng = document.createElement('p');
          alertEng.innerHTML = `• ${alert.title_en}`;
          alertsContainer.appendChild(alertEng);
          
          if (alert.title_krio) {
            const alertKrio = document.createElement('p');
            alertKrio.innerHTML = `• ${alert.title_krio}`;
            alertsContainerKrio.appendChild(alertKrio);
          } else {
            alertsContainerKrio.innerHTML = alertsContainer.innerHTML;
          }
        });
      }
    }
  
    // Initialization
    document.addEventListener('DOMContentLoaded', () => {
      // Fetch WHO health alerts
      fetch('https://www.who.int/api/health-alerts')
        .then(response => response.json())
        .then(data => displayHealthAlert(data))
        .catch(error => console.error('Error fetching health alerts:', error));

      // Show welcome message in chat
      setTimeout(() => {
        if (isEnglish) {
          addBotMessage(welcomeChatText.textContent, ['I have fever', 'Mosquito bite advice', 'Find clinic near me']);
        } else {
          addBotMessage(welcomeChatTextKrio.textContent, ['I get fever', 'Advice for mosquito', 'Find clinic close']);
        }
      }, 500);

      // Add shake animation to emergency button every 30 seconds
      setInterval(() => {
        emergencyBtn.classList.add('emergency-shake');
        setTimeout(() => {
          emergencyBtn.classList.remove('emergency-shake');
        }, 1000);
      }, 30000);
    });
  </script>
</html>
